<!DOCTYPE html>
<html>
  <head>
    <title>Enhanced CRE Console Map - Google Maps with Places</title>
    <script>
      async function init() {
        await customElements.whenDefined('gmp-map');

        const map = document.querySelector('gmp-map');
        const marker = document.querySelector('gmp-advanced-marker');
        const placePicker = document.querySelector('gmpx-place-picker');
        const infowindow = new google.maps.InfoWindow();

        map.innerMap.setOptions({
          mapTypeControl: false,
          styles: [
            {
              "featureType": "all",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "weight": "2.00"
                }
              ]
            },
            {
              "featureType": "all",
              "elementType": "geometry.stroke",
              "stylers": [
                {
                  "color": "#9c9c9c"
                }
              ]
            },
            {
              "featureType": "all",
              "elementType": "labels.text",
              "stylers": [
                {
                  "visibility": "on"
                }
              ]
            },
            {
              "featureType": "landscape",
              "elementType": "all",
              "stylers": [
                {
                  "color": "#f2f2f2"
                }
              ]
            },
            {
              "featureType": "landscape",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#ffffff"
                }
              ]
            },
            {
              "featureType": "landscape.man_made",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#ffffff"
                }
              ]
            },
            {
              "featureType": "poi",
              "elementType": "all",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "road",
              "elementType": "all",
              "stylers": [
                {
                  "saturation": -100
                },
                {
                  "lightness": 45
                }
              ]
            },
            {
              "featureType": "road",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#eeeeee"
                }
              ]
            },
            {
              "featureType": "road",
              "elementType": "labels.text.fill",
              "stylers": [
                {
                  "color": "#7b7b7b"
                }
              ]
            },
            {
              "featureType": "road",
              "elementType": "labels.text.stroke",
              "stylers": [
                {
                  "color": "#ffffff"
                }
              ]
            },
            {
              "featureType": "road.highway",
              "elementType": "all",
              "stylers": [
                {
                  "visibility": "simplified"
                }
              ]
            },
            {
              "featureType": "road.arterial",
              "elementType": "labels.icon",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "transit",
              "elementType": "all",
              "stylers": [
                {
                  "visibility": "off"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "all",
              "stylers": [
                {
                  "color": "#46bcec"
                },
                {
                  "visibility": "on"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "geometry.fill",
              "stylers": [
                {
                  "color": "#c8d7d4"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "labels.text.fill",
              "stylers": [
                {
                  "color": "#070707"
                }
              ]
            },
            {
              "featureType": "water",
              "elementType": "labels.text.stroke",
              "stylers": [
                {
                  "color": "#ffffff"
                }
              ]
            }
          ]
        });

        placePicker.addEventListener('gmpx-placechange', () => {
          const place = placePicker.value;

          if (!place.location) {
            window.alert(
              "No details available for input: '" + place.name + "'"
            );
            infowindow.close();
            marker.position = null;
            return;
          }

          if (place.viewport) {
            map.innerMap.fitBounds(place.viewport);
          } else {
            map.center = place.location;
            map.zoom = 17;
          }

          marker.position = place.location;
          infowindow.setContent(
            `<strong>${place.displayName}</strong><br>
             <span>${place.formattedAddress}</span>
          `);
          infowindow.open(map.innerMap, marker);
        });

        // Add major metropolitan areas as circle overlays
        const metroAreas = [
          // Tier 1 Markets (Primary)
          { center: { lat: 40.7128, lng: -74.0060 }, name: 'New York', class: 'tier1' },
          { center: { lat: 34.0522, lng: -118.2437 }, name: 'Los Angeles', class: 'tier1' },
          { center: { lat: 41.8781, lng: -87.6298 }, name: 'Chicago', class: 'tier1' },
          { center: { lat: 37.7749, lng: -122.4194 }, name: 'San Francisco', class: 'tier1' },
          { center: { lat: 38.9072, lng: -77.0369 }, name: 'Washington DC', class: 'tier1' },
          { center: { lat: 42.3601, lng: -71.0589 }, name: 'Boston', class: 'tier1' },
          { center: { lat: 33.7490, lng: -84.3880 }, name: 'Atlanta', class: 'tier1' },
          { center: { lat: 25.7617, lng: -80.1918 }, name: 'Miami', class: 'tier1' },

          // Tier 2 Markets (Secondary)
          { center: { lat: 29.7604, lng: -95.3698 }, name: 'Houston', class: 'tier2' },
          { center: { lat: 33.4484, lng: -112.0740 }, name: 'Phoenix', class: 'tier2' },
          { center: { lat: 39.9526, lng: -75.1652 }, name: 'Philadelphia', class: 'tier2' },
          { center: { lat: 32.7767, lng: -96.7970 }, name: 'Dallas', class: 'tier2' },
          { center: { lat: 47.6062, lng: -122.3321 }, name: 'Seattle', class: 'tier2' },
          { center: { lat: 39.7392, lng: -104.9903 }, name: 'Denver', class: 'tier2' },
          { center: { lat: 42.3314, lng: -83.0458 }, name: 'Detroit', class: 'tier2' },
          { center: { lat: 36.1627, lng: -86.7816 }, name: 'Nashville', class: 'tier2' },
          { center: { lat: 36.1699, lng: -115.1398 }, name: 'Las Vegas', class: 'tier2' },
          { center: { lat: 44.9778, lng: -93.2650 }, name: 'Minneapolis', class: 'tier2' },

          // Tier 3 Markets (Tertiary)
          { center: { lat: 30.3322, lng: -81.6557 }, name: 'Jacksonville', class: 'tier3' },
          { center: { lat: 35.2271, lng: -80.8431 }, name: 'Charlotte', class: 'tier3' },
          { center: { lat: 39.7684, lng: -86.1581 }, name: 'Indianapolis', class: 'tier3' },
          { center: { lat: 45.5152, lng: -122.6784 }, name: 'Portland', class: 'tier3' },
          { center: { lat: 35.4676, lng: -97.5164 }, name: 'Oklahoma City', class: 'tier3' },
          { center: { lat: 38.2527, lng: -85.7585 }, name: 'Louisville', class: 'tier3' },
          { center: { lat: 43.0389, lng: -87.9065 }, name: 'Milwaukee', class: 'tier3' },
          { center: { lat: 39.0997, lng: -94.5786 }, name: 'Kansas City', class: 'tier3' },
          { center: { lat: 41.4993, lng: -81.6944 }, name: 'Cleveland', class: 'tier3' },
          { center: { lat: 35.7796, lng: -78.6382 }, name: 'Raleigh', class: 'tier3' }
        ];

        // Add circles for each metro area
        metroAreas.forEach(area => {
          const circle = new google.maps.Circle({
            strokeColor: area.class === 'tier1' ? '#3b82f6' : area.class === 'tier2' ? '#10b981' : '#f59e0b',
            strokeOpacity: 0.4,
            strokeWeight: 1,
            fillColor: area.class === 'tier1' ? '#60a5fa' : area.class === 'tier2' ? '#34d399' : '#fbbf24',
            fillOpacity: area.class === 'tier1' ? 0.15 : area.class === 'tier2' ? 0.12 : 0.1,
            map: map.innerMap,
            center: area.center,
            radius: area.class === 'tier1' ? 100000 : area.class === 'tier2' ? 80000 : 60000, // radius in meters
          });

          // Add info window for tier 1 markets
          if (area.class === 'tier1') {
            const areaInfoWindow = new google.maps.InfoWindow({
              content: `
                <div style="padding: 12px; text-align: center;">
                  <h3 style="margin: 0 0 8px 0; color: #1f2937; font-size: 16px; font-weight: 600;">${area.name}</h3>
                  <span style="
                    background: #3b82f6;
                    color: white;
                    padding: 4px 12px;
                    border-radius: 12px;
                    font-size: 12px;
                    font-weight: 500;
                  ">
                    Tier 1 Market
                  </span>
                </div>
              `
            });

            circle.addListener('click', () => {
              areaInfoWindow.setPosition(area.center);
              areaInfoWindow.open(map.innerMap);
            });
          }
        });
      }

      document.addEventListener('DOMContentLoaded', init);
    </script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/@googlemaps/extended-component-library/0.6.11/index.min.js">
    </script>
    <style>
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: #f8fafc;
      }

      .place-picker-container {
        padding: 20px;
      }

      .map-overlay {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
        max-width: 300px;
      }

      .map-overlay h2 {
        margin: 0 0 10px 0;
        color: #1f2937;
        font-size: 18px;
        font-weight: 600;
      }

      .map-overlay p {
        margin: 0;
        color: #6b7280;
        font-size: 14px;
        line-height: 1.5;
      }

      .legend {
        position: absolute;
        bottom: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 16px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
      }

      .legend h3 {
        margin: 0 0 12px 0;
        color: #1f2937;
        font-size: 14px;
        font-weight: 600;
      }

      .legend-item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
        font-size: 12px;
      }

      .legend-color {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        margin-right: 8px;
        border: 2px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }

      .tier1 { background: #3b82f6; }
      .tier2 { background: #10b981; }
      .tier3 { background: #f59e0b; }
    </style>
  </head>
  <body>
    <gmpx-api-loader key="AIzaSyAe58WUHYvNaCLKJOReaTdy-UavTU3IEr0" solution-channel="GMP_GE_mapsandplacesautocomplete_v2">
    </gmpx-api-loader>
    <gmp-map center="39.8283,-98.5795" zoom="4" map-id="DEMO_MAP_ID">
      <div slot="control-block-start-inline-start" class="place-picker-container">
        <gmpx-place-picker placeholder="Enter an address"></gmpx-place-picker>
      </div>
      <gmp-advanced-marker></gmp-advanced-marker>
    </gmp-map>

    <div class="map-overlay">
      <h2>🏢 CRE Console</h2>
      <p>Interactive Google Maps with Places API integration showing major commercial real estate markets with color-coded metropolitan areas and enhanced property visualization.</p>
    </div>

    <div class="legend">
      <h3>📍 Market Tiers</h3>
      <div class="legend-item">
        <div class="legend-color tier1"></div>
        <span>Tier 1 Markets (Primary)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color tier2"></div>
        <span>Tier 2 Markets (Secondary)</span>
      </div>
      <div class="legend-item">
        <div class="legend-color tier3"></div>
        <span>Tier 3 Markets (Tertiary)</span>
      </div>
    </div>
  </body>
</html>